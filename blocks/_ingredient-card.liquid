{% assign block_settings = block.settings %}
{% assign card_id = 'ingredient-card-' | append: block.id %}

<div class="ingredient-card" {{ block.shopify_attributes }} id="{{ card_id }}">
  <div class="ingredient-card__image-container">
    {% if block_settings.image != blank %}
      {% liquid
        assign sizes = '300px'
        assign widths = '300, 600, 900'
      %}
      {{
        block_settings.image
        | image_url: width: 600
        | image_tag: class: 'ingredient-card__image', sizes: sizes, widths: widths, loading: 'lazy'
      }}
    {% else %}
      <div class="ingredient-card__placeholder" style="width: 100%; height: 100%; background-color: #e0e0e0; display: flex; align-items: center; justify-content: center;">
        <span style="color: #999; font-size: 0.875rem;">No image</span>
      </div>
    {% endif %}
     <div class="ingredient-card__content">
      {% if block_settings.subtitle %}
        <div class="ingredient-card__subtitle">{{ block_settings.subtitle }}</div>
      {% endif %}


        {% if block_settings.name != blank or block_settings.description != blank %}
          <div class="ingredient-card__wrapper">
            {% if block_settings.name != blank %}
              <h4 class="ingredient-card__name">{{ block_settings.name }}</h4>
            {% endif %}
            {% if block_settings.description != blank %}
              <div class="ingredient-card__description">{{ block_settings.description }}</div>
            {% endif %}
          </div>
        {% endif %}
    </div>
  </div> 
 
</div>

{% schema %}
{
  "name": "Ingredient Card",
  "settings": [
    {
      "type": "text",
      "id": "name",
      "label": "Ingredient Name",
      "default": "INGREDIENT NAME"
    },
    {
      "type": "text",
      "id": "subtitle",
      "label": "Sub Title",
      "default": "BILBERRY"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description"
    }
  ]
}
{% endschema %}
