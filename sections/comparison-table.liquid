{% schema %}
{
  "name": "Comparison Table",
  "tag": "section",
  "class": "section-comparison-table",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "AG1 is a more-in-one solution"
    },
    {
      "type": "header",
      "content": "Column Headers"
    },
    {
      "type": "text",
      "id": "header_1",
      "label": "Column 1 Header",
      "default": "Category"
    },
    {
      "type": "image_picker",
      "id": "highlight_logo",
      "label": "Highlight Column Logo (e.g. AG1)"
    },
    {
      "type": "text",
      "id": "header_2",
      "label": "Highlight Column Text",
      "default": "AG1"
    },
    {
      "type": "text",
      "id": "header_3",
      "label": "Column 3 Header",
      "default": "Multivitamins"
    },
    {
      "type": "text",
      "id": "header_4",
      "label": "Column 4 Header",
      "default": "Probiotics"
    },
    {
      "type": "text",
      "id": "header_5",
      "label": "Column 5 Header",
      "default": "Greens"
    },
    {
      "type": "text",
      "id": "footer_text",
      "label": "Footer Text",
      "default": "*Based on current available data for mass market dietary supplements."
    },
    {
      "type": "header",
      "content": "Appearance"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Heading Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "General Text Color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "highlight_bg_color",
      "label": "Highlight Column BG",
      "default": "#003b30"
    },
    {
      "type": "color",
      "id": "highlight_text_color",
      "label": "Highlight Column Text",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Icon Colors"
    },
    {
      "type": "color",
      "id": "tick_circle_color",
      "label": "Tick Circle Color",
      "default": "#4ade80"
    },
    {
      "type": "color",
      "id": "tick_mark_color",
      "label": "Tick Mark Color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top Padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 60
    }
  ],
  "blocks": [
    {
      "type": "row",
      "name": "Table Row",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Row Label",
          "default": "Vitamins"
        },
        {
          "type": "select",
          "id": "col_1_status",
          "label": "Column 1 Status (Highlight)",
          "options": [
            { "value": "tick", "label": "Tick" },
            { "value": "cross", "label": "Cross" }
          ],
          "default": "tick"
        },
        {
          "type": "select",
          "id": "col_2_status",
          "label": "Column 2 Status",
          "options": [
            { "value": "tick", "label": "Tick" },
            { "value": "cross", "label": "Cross" }
          ],
          "default": "cross"
        },
        {
          "type": "select",
          "id": "col_3_status",
          "label": "Column 3 Status",
          "options": [
            { "value": "tick", "label": "Tick" },
            { "value": "cross", "label": "Cross" }
          ],
          "default": "cross"
        },
        {
          "type": "select",
          "id": "col_4_status",
          "label": "Column 4 Status",
          "options": [
            { "value": "tick", "label": "Tick" },
            { "value": "cross", "label": "Cross" }
          ],
          "default": "cross"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Comparison Table PDP",
      "blocks": [
        {
          "type": "row",
          "settings": {
            "label": "Vitamins",
            "col_1_status": "tick",
            "col_2_status": "tick",
            "col_3_status": "cross",
            "col_4_status": "cross"
          }
        },
        {
          "type": "row",
          "settings": {
            "label": "Minerals",
            "col_1_status": "tick",
            "col_2_status": "tick",
            "col_3_status": "cross",
            "col_4_status": "cross"
          }
        },
        {
          "type": "row",
          "settings": {
            "label": "Prebiotics",
            "col_1_status": "tick",
            "col_2_status": "cross",
            "col_3_status": "cross",
            "col_4_status": "cross"
          }
        },
        {
          "type": "row",
          "settings": {
            "label": "Probiotics",
            "col_1_status": "tick",
            "col_2_status": "cross",
            "col_3_status": "tick",
            "col_4_status": "cross"
          }
        },
        {
          "type": "row",
          "settings": {
            "label": "Greens & Superfoods",
            "col_1_status": "tick",
            "col_2_status": "cross",
            "col_3_status": "cross",
            "col_4_status": "tick"
          }
        },
        {
          "type": "row",
          "settings": {
            "label": "Antioxidants",
            "col_1_status": "tick",
            "col_2_status": "cross",
            "col_3_status": "cross",
            "col_4_status": "tick"
          }
        },
        {
          "type": "row",
          "settings": {
            "label": "Digestive Enzymes",
            "col_1_status": "tick",
            "col_2_status": "cross",
            "col_3_status": "cross",
            "col_4_status": "cross"
          }
        }
      ]
    }
  ]
}
{% endschema %}

{%- style -%}
  .comparison-table-{{ section.id }} {
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    background: #fff;
    font-family: "Inter", var(--font-body--family), sans-serif;
  }

  .comparison-table__container {
    max-width: 1300px;
    margin: 0 auto;
    padding: 0 40px;
  }

  .comparison-table__title {
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 500;
    margin-bottom: 4rem;
    color: {{ section.settings.title_color }};
    letter-spacing: -0.01em;
  }

  .comparison-table__wrapper {
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 30px;
  }

  .comparison-table__table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    min-width: 900px;
  }

  .comparison-table__table th {
    padding: 24px 15px;
    font-weight: 700;
    text-align: center;
    font-size: clamp(14px, 1.2vw, 17px);
    color: {{ section.settings.text_color }};
    vertical-align: middle;
  }

  .comparison-table__table th:first-child {
    text-align: left;
    width: 28%;
  }

  .comparison-table__table td {
    padding: 24px 15px;
    border-bottom: 1px solid #efefef;
    text-align: center;
    vertical-align: middle;
  }

  .comparison-table__table td:first-child {
    text-align: left;
    font-weight: 400;
    color: {{ section.settings.text_color }};
    font-size: clamp(15px, 1.3vw, 18px);
    padding-left: 0;
  }

  /* Highlight Column */
  .col-highlight {
    background-color: {{ section.settings.highlight_bg_color }};
    color: {{ section.settings.highlight_text_color }};
    width: 19%;
    position: relative;
    border-bottom: none !important;
  }

  .comparison-table__table th.col-highlight {
    border-top-left-radius: 16px;
    border-top-right-radius: 16px;
    padding: 40px 15px;
  }

  .comparison-table__table tr:last-child td.col-highlight {
    border-bottom-left-radius: 16px;
    border-bottom-right-radius: 16px;
  }

  .comparison-table__table td.col-highlight {
    border-bottom: 1px solid rgba(255,255,255,0.08) !important;
  }

  .comparison-table__table tr:last-child td.col-highlight {
    border-bottom: none !important;
  }

  /* Icons */
  .status-icon {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .status-icon svg {
    width: 32px;
    height: 32px;
  }

  .comparison-table__footer {
    margin-top: 32px;
    font-size: 13px;
    font-style: italic;
    color: {{ section.settings.text_color }};
    opacity: 0.9;
  }

  @media screen and (max-width: 749px) {
    .comparison-table__container {
        padding: 0 20px;
    }
  }
{%- endstyle -%}

<div class="comparison-table-{{ section.id }} comparison-table">
  <div class="comparison-table__container">
    {% if section.settings.title != blank %}
      <h2 class="comparison-table__title">{{ section.settings.title }}</h2>
    {% endif %}

    <div class="comparison-table__wrapper">
      <table class="comparison-table__table">
        <thead>
          <tr>
            <th>{{ section.settings.header_1 }}</th>
            <th class="col-highlight">
              {% if section.settings.highlight_logo != blank %}
                {{
                  section.settings.highlight_logo
                  | image_url: width: 100
                  | image_tag: style: 'max-height: 40px; width: auto; object-fit: contain;'
                }}
              {% else %}
                {{ section.settings.header_2 }}
              {% endif %}
            </th>
            <th>{{ section.settings.header_3 }}</th>
            <th>{{ section.settings.header_4 }}</th>
            <th>{{ section.settings.header_5 }}</th>
          </tr>
        </thead>
        <tbody>
          {% for block in section.blocks %}
            <tr {{ block.shopify_attributes }}>
              <td>{{ block.settings.label }}</td>
              <td class="col-highlight">
                <div class="status-icon">
                  {% if block.settings.col_1_status == 'tick' %}
                    {% render 'comparison-icon-tick',
                      circle_color: section.settings.tick_circle_color,
                      tick_color: section.settings.tick_mark_color
                    %}
                  {% else %}
                    {% render 'comparison-icon-cross' %}
                  {% endif %}
                </div>
              </td>
              <td>
                <div class="status-icon">
                  {% if block.settings.col_2_status == 'tick' %}
                    {% render 'comparison-icon-tick',
                      circle_color: section.settings.tick_circle_color,
                      tick_color: section.settings.tick_mark_color
                    %}
                  {% else %}
                    {% render 'comparison-icon-cross' %}
                  {% endif %}
                </div>
              </td>
              <td>
                <div class="status-icon">
                  {% if block.settings.col_3_status == 'tick' %}
                    {% render 'comparison-icon-tick',
                      circle_color: section.settings.tick_circle_color,
                      tick_color: section.settings.tick_mark_color
                    %}
                  {% else %}
                    {% render 'comparison-icon-cross' %}
                  {% endif %}
                </div>
              </td>
              <td>
                <div class="status-icon">
                  {% if block.settings.col_4_status == 'tick' %}
                    {% render 'comparison-icon-tick',
                      circle_color: section.settings.tick_circle_color,
                      tick_color: section.settings.tick_mark_color
                    %}
                  {% else %}
                    {% render 'comparison-icon-cross' %}
                  {% endif %}
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    {% if section.settings.footer_text != blank %}
      <div class="comparison-table__footer">
        {{ section.settings.footer_text }}
      </div>
    {% endif %}
  </div>
</div>
